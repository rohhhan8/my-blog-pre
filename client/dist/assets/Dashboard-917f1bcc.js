import{u as q,b as G,r as x,j as e,L as p,h as R,c as _,d as Q}from"./index-0685d0f1.js";import{g as H,a as V,d as Z}from"./blogService-c5e7d1e2.js";import{f as X}from"./index-b158c261.js";const ae=()=>{const{currentUser:t}=q(),M=G(),[b,k]=x.useState([]),[C,I]=x.useState([]),[N,A]=x.useState(!0),[B,T]=x.useState(!0),[U,w]=x.useState(""),[O,L]=x.useState(""),[y,v]=x.useState(null),[P,j]=x.useState(!1),[$,W]=x.useState(!1),[F,z]=x.useState(0),[S,K]=x.useState("myBlogs"),[ee,D]=x.useState({});x.useEffect(()=>{if(!t){M("/login");return}const s=async()=>{A(!0),w("");try{const c=sessionStorage.getItem("cachedUserBlogs"),g=sessionStorage.getItem("userBlogsCacheTimestamp"),l=(g?Date.now()-parseInt(g):1/0)<2*60*1e3;if(c&&l)try{const o=JSON.parse(c);if(Array.isArray(o)){console.log("Using cached user blogs from sessionStorage");const n=o.map(i=>(i.author_name==="Official Editz"&&(i.author_name="Kuldeep"),i.author==="Official Editz"&&(i.author="Kuldeep"),i));k(n),A(!1),h();return}}catch(o){console.error("Error parsing cached user blogs:",o)}try{console.log("Fetching all blogs without authentication");const o=await H();if(Array.isArray(o)&&o.length>0){console.log("All blogs fetched:",o);const i=o.map(a=>(a.author_name==="Official Editz"&&(a.author_name="Kuldeep"),a.author==="Official Editz"&&(a.author="Kuldeep"),a)).filter(a=>{let f;typeof a.author=="object"?f=a.author.id||a.author._id||a.author.username:f=a.author;const E=a.author_id;if(console.log(`Blog ${a._id} - Title: ${a.title}`),console.log(`  Author: ${a.author}, Author ID: ${E}`),console.log(`  Current user: ${t.uid}, Email: ${t.email}`),a.author==="Kuldeep"||a.author_name==="Kuldeep")return console.log("  This is Kuldeep's blog"),!0;const u=f===t.uid||f===t.email||a.author_id&&a.author_id.toString()===t.uid||a.author_name&&t.displayName&&a.author_name.includes(t.displayName);return console.log(`  Is user's blog? ${u}`),u});console.log("Filtered user blogs:",i),k(i);try{sessionStorage.setItem("cachedUserBlogs",JSON.stringify(i)),sessionStorage.setItem("userBlogsCacheTimestamp",Date.now().toString())}catch(a){console.error("Error caching user blogs:",a)}return}}catch(o){console.error("Error fetching all blogs:",o)}console.log("Trying with authentication...");const r=await t.getIdToken(!0);console.log("Fetching blogs for user:",t.uid),_.setAuthToken(r);try{const o=await _.get("/blogs/");if(console.log("Blogs fetched with apiClient:",o.data),Array.isArray(o.data)){const n=o.data.filter(i=>{let a=typeof i.author=="object"?i.author.id||i.author._id||i.author.username:i.author;return a===t.uid||a===t.email||i.author_id===t.uid});console.log("Final user blogs from apiClient:",n),k(n);try{sessionStorage.setItem("cachedUserBlogs",JSON.stringify(n)),sessionStorage.setItem("userBlogsCacheTimestamp",Date.now().toString())}catch(i){console.error("Error caching user blogs:",i)}return}}catch(o){console.error("Error fetching blogs with apiClient:",o)}const m=await Q.get("/api/blogs/",{headers:{Authorization:`Bearer ${r}`}});if(console.log("Blogs fetched with direct axios:",m.data),Array.isArray(m.data)){const o=m.data.filter(n=>{let i=typeof n.author=="object"?n.author.id||n.author._id||n.author.username:n.author;return i===t.uid||i===t.email||n.author_id===t.uid});console.log("Final user blogs from direct axios:",o),k(o);try{sessionStorage.setItem("cachedUserBlogs",JSON.stringify(o)),sessionStorage.setItem("userBlogsCacheTimestamp",Date.now().toString())}catch(n){console.error("Error caching user blogs:",n)}}}catch(c){console.error("Fetch error:",c),w("Failed to load your blogs. Please try again.")}finally{A(!1)}},h=async()=>{try{console.log("Refreshing user blogs in background");const c=await t.getIdToken(!0);_.setAuthToken(c);const g=await H();if(Array.isArray(g)&&g.length>0){const l=g.map(r=>(r.author_name==="Official Editz"&&(r.author_name="Kuldeep"),r.author==="Official Editz"&&(r.author="Kuldeep"),r)).filter(r=>{let m;return typeof r.author=="object"?m=r.author.id||r.author._id||r.author.username:m=r.author,r.author==="Kuldeep"||r.author_name==="Kuldeep"?!0:m===t.uid||m===t.email||r.author_id&&r.author_id.toString()===t.uid||r.author_name&&t.displayName&&r.author_name.includes(t.displayName)});console.log("Updated user blogs in background:",l),k(l);try{sessionStorage.setItem("cachedUserBlogs",JSON.stringify(l)),sessionStorage.setItem("userBlogsCacheTimestamp",Date.now().toString())}catch(r){console.error("Error updating cached user blogs:",r)}}}catch(c){console.error("Error refreshing user blogs in background:",c)}};s()},[t,M,F]),x.useEffect(()=>{if(!t)return;const s=async()=>{var c;T(!0),L("");try{const g=sessionStorage.getItem("cachedLikedBlogs"),d=sessionStorage.getItem("likedBlogsCacheTimestamp"),r=(d?Date.now()-parseInt(d):1/0)<2*60*1e3;if(g&&r)try{const a=JSON.parse(g);if(Array.isArray(a)){console.log("Using cached liked blogs from sessionStorage");const f=a.map(u=>(u.author_name==="Official Editz"&&(u.author_name="Kuldeep"),u.author==="Official Editz"&&(u.author="Kuldeep"),u.is_liked=!0,u));I(f);const E={};f.forEach(u=>{E[u._id]={views:u.views||0,likes:u.like_count||0}}),D(u=>({...u,...E})),T(!1),h();return}}catch(a){console.error("Error parsing cached liked blogs:",a)}const m=await t.getIdToken(!0);console.log("Fetching liked blogs for user:",t.uid);const o=await V(m);console.log("Liked blogs fetched:",o);const n=Array.isArray(o)?o.map(a=>(a.author_name==="Official Editz"&&(a.author_name="Kuldeep"),a.author==="Official Editz"&&(a.author="Kuldeep"),a.is_liked=!0,a)):[];I(n);try{sessionStorage.setItem("cachedLikedBlogs",JSON.stringify(n)),sessionStorage.setItem("likedBlogsCacheTimestamp",Date.now().toString())}catch(a){console.error("Error caching liked blogs:",a)}const i={};Array.isArray(o)&&(o.forEach(a=>{i[a._id]={views:a.views||0,likes:a.like_count||0}}),D(a=>({...a,...i})))}catch(g){console.error("Error fetching liked blogs:",g),L("Failed to load your liked blogs. Please try again.");try{console.log("Trying to get liked blogs from localStorage");const d=JSON.parse(localStorage.getItem("likedBlogs")||"{}"),l=Object.keys(d).filter(r=>d[r]);l.length>0&&(console.log("Found liked blog IDs in localStorage:",l),L("Using cached liked blogs. Some information may be outdated."))}catch(d){console.error("Error reading from localStorage:",d)}g.response&&(console.error("Response status:",g.response.status),console.error("Response data:",g.response.data),L(`Failed to load liked blogs: ${((c=g.response.data)==null?void 0:c.detail)||g.message}`))}finally{T(!1)}},h=async()=>{try{const c=await t.getIdToken(!0);console.log("Refreshing liked blogs in background");const g=await V(c);if(Array.isArray(g)){const d=g.map(r=>(r.author_name==="Official Editz"&&(r.author_name="Kuldeep"),r.author==="Official Editz"&&(r.author="Kuldeep"),r.is_liked=!0,r));I(d);try{sessionStorage.setItem("cachedLikedBlogs",JSON.stringify(d)),sessionStorage.setItem("likedBlogsCacheTimestamp",Date.now().toString())}catch(r){console.error("Error updating cached liked blogs:",r)}const l={};g.forEach(r=>{l[r._id]={views:r.views||0,likes:r.like_count||0}}),D(r=>({...r,...l}))}}catch(c){console.error("Error refreshing liked blogs in background:",c)}};s()},[t,F]);const J=s=>{v(s),j(!0)},Y=async()=>{var s;if(y){W(!0);try{const h=b.find(d=>d._id===y);console.log("Attempting to delete blog:",h),k(d=>d.filter(l=>l._id!==y));try{localStorage.setItem(`deletedBlog_${y}`,JSON.stringify(h))}catch(d){console.error("Error storing blog in localStorage:",d)}await t.getIdToken(!0),await new Promise(d=>setTimeout(d,1e3));const c=await t.getIdToken();console.log("Using fresh token for delete"),localStorage.setItem("authToken",c),localStorage.setItem("userInfo",JSON.stringify({uid:t.uid,email:t.email,displayName:t.displayName||""})),_.setAuthToken(c,{uid:t.uid,email:t.email,displayName:t.displayName||""});const g={"X-User-ID":t.uid,"X-User-Email":t.email,"X-User-Display-Name":t.displayName||"","X-Firebase-UID":t.uid,uid:t.uid,"firebase-uid":t.uid,"Cache-Control":"no-cache",Pragma:"no-cache"};try{const d=await Z(y,c,g);console.log("Delete successful:",d);try{const m=JSON.parse(sessionStorage.getItem("cachedBlogs")||"[]").filter(o=>o._id!==y);sessionStorage.setItem("cachedBlogs",JSON.stringify(m)),console.log(`Removed blog ${y} from cached blogs in sessionStorage`)}catch(r){console.error("Error updating sessionStorage:",r)}try{const m=JSON.parse(sessionStorage.getItem("cachedUserBlogs")||"[]").filter(o=>o._id!==y);sessionStorage.setItem("cachedUserBlogs",JSON.stringify(m)),console.log(`Removed blog ${y} from cached user blogs in sessionStorage`)}catch(r){console.error("Error updating sessionStorage:",r)}j(!1),v(null),w("");const l=document.createElement("div");l.className="fixed bottom-4 right-4 bg-green-500 text-white px-4 py-2 rounded shadow-lg z-50",l.textContent="Blog deleted successfully",document.body.appendChild(l),setTimeout(()=>{document.body.contains(l)&&document.body.removeChild(l)},3e3),setTimeout(()=>{z(r=>r+1)},1e3);return}catch(d){console.error("Error with deleteBlog service:",d)}try{console.log("Trying direct fetch approach");const d=new Date().getTime(),l=`/api/blogs/${y}/?_=${d}`;let r="";try{const n=c.split(".");if(n.length===3){const i=JSON.parse(atob(n[1]));r=i.user_id||i.sub||"",!r&&i.firebase&&i.firebase.identities&&i.firebase.identities.email&&(r=i.firebase.identities.email[0],console.log("Using email as uid fallback:",r)),!r&&i.email&&(r=i.email,console.log("Using email as uid fallback:",r)),console.log("Token payload for debugging:",i)}}catch(n){console.error("Error extracting uid from token:",n)}const m=await fetch(l,{method:"DELETE",headers:{Authorization:`Bearer ${c}`,"Content-Type":"application/json",uid:r||t.uid,"firebase-uid":r||t.uid,"X-Firebase-UID":r||t.uid,"X-User-UID":r||t.uid,"X-User-Email":t.email,"X-User-Display-Name":t.displayName||"","X-Blog-Author":"true",...g}});if(!m.ok)throw new Error(`Fetch delete failed with status ${m.status}`);console.log("Delete successful with fetch API:",m);try{const i=JSON.parse(sessionStorage.getItem("cachedBlogs")||"[]").filter(a=>a._id!==y);sessionStorage.setItem("cachedBlogs",JSON.stringify(i))}catch(n){console.error("Error updating sessionStorage:",n)}j(!1),v(null),w("");const o=document.createElement("div");o.className="fixed bottom-4 right-4 bg-green-500 text-white px-4 py-2 rounded shadow-lg z-50",o.textContent="Blog deleted successfully",document.body.appendChild(o),setTimeout(()=>{document.body.contains(o)&&document.body.removeChild(o)},3e3),setTimeout(()=>{z(n=>n+1)},1e3);return}catch(d){console.error("Fetch delete approach failed:",d)}throw k(d=>d.some(l=>l._id===y)?d:h?[...d,h]:d),new Error("All delete attempts failed")}catch(h){if(console.error("Delete error:",h),h.response){console.error("Response status:",h.response.status),console.error("Response data:",h.response.data),console.error("Response headers:",h.response.headers);const c=h.response.status,g=((s=h.response.data)==null?void 0:s.detail)||h.message;w(c===403?"Permission denied. You can only delete your own blogs.":c===404?"Blog not found. It may have been already deleted.":`Failed to delete blog: ${g}`),c===404&&(j(!1),v(null),k(d=>d.filter(l=>l._id!==y)))}else console.error("Error object:",h),w(`Failed to delete blog: ${h.message}`);(!h.response||h.response.status>=500)&&(j(!1),v(null))}finally{W(!1)}}};return e.jsx("div",{className:"min-h-screen bg-white dark:bg-black page-content",children:e.jsxs("div",{className:"max-w-6xl mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsx("div",{className:"mb-6 sm:mb-8",children:e.jsxs("div",{className:"bg-white dark:bg-black p-4 sm:p-6 rounded-lg shadow-md border border-gray-200 dark:border-gray-700",children:[e.jsx("h1",{className:"text-2xl sm:text-3xl font-bold text-gray-900 dark:text-white font-serif",children:"My Dashboard"}),e.jsx("p",{className:"mt-2 text-gray-600 dark:text-gray-300",children:"Manage your blog posts and see your stats"})]})}),e.jsx("div",{className:"mb-8",children:e.jsxs(p,{to:"/create",className:"inline-flex items-center px-5 py-3 bg-gray-900 dark:bg-white text-white dark:text-gray-900 rounded-md hover:bg-gray-800 dark:hover:bg-gray-100 transition-colors shadow-md hover:shadow-lg",children:[e.jsx("svg",{className:"h-5 w-5 mr-2",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{d:"M10 3a1 1 0 00-1 1v5H4a1 1 0 100 2h5v5a1 1 0 102 0v-5h5a1 1 0 100-2h-5V4a1 1 0 00-1-1z"})}),"Create New Blog"]})}),e.jsx("div",{className:"bg-white dark:bg-black rounded-lg shadow-md overflow-hidden border border-gray-200 dark:border-gray-700",children:e.jsxs("div",{className:"p-4 sm:p-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-6 gap-4 sm:gap-0",children:[e.jsxs("div",{className:"flex flex-wrap gap-4 sm:space-x-4 w-full sm:w-auto",children:[e.jsx("button",{onClick:()=>K("myBlogs"),className:`text-base sm:text-lg font-medium pb-2 border-b-2 transition-colors ${S==="myBlogs"?"text-gray-900 dark:text-white border-gray-900 dark:border-white":"text-gray-500 dark:text-gray-400 border-transparent hover:text-gray-700 dark:hover:text-gray-300"}`,children:"My Blog Posts"}),e.jsx("button",{onClick:()=>K("likedBlogs"),className:`text-base sm:text-lg font-medium pb-2 border-b-2 transition-colors ${S==="likedBlogs"?"text-gray-900 dark:text-white border-gray-900 dark:border-white":"text-gray-500 dark:text-gray-400 border-transparent hover:text-gray-700 dark:hover:text-gray-300"}`,children:"Liked Blogs"})]}),e.jsxs("button",{onClick:()=>z(s=>s+1),className:"flex items-center text-gray-700 dark:text-gray-300 hover:text-gray-900 dark:hover:text-white transition-colors",disabled:N||B,children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:`h-5 w-5 mr-1 ${N||B?"animate-spin":""}`,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),N||B?"Refreshing...":"Refresh"]})]}),S==="myBlogs"&&e.jsx(e.Fragment,{children:N?e.jsx("div",{className:"py-8",children:e.jsx(R,{})}):U?e.jsx("div",{className:"bg-gray-100 dark:bg-gray-900 text-gray-700 dark:text-gray-300 p-4 rounded-md border border-gray-200 dark:border-gray-700",children:U}):b.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx("p",{className:"text-gray-500 dark:text-gray-400 mb-4",children:"You haven't created any blog posts yet."}),e.jsx(p,{to:"/create",className:"text-gray-900 dark:text-white hover:underline",children:"Create your first blog post"})]}):e.jsxs("div",{className:"overflow-x-auto -mx-4 sm:-mx-6",children:[e.jsx("div",{className:"grid grid-cols-1 gap-4 mb-4 sm:hidden",children:b.map(s=>e.jsxs("div",{className:"bg-white dark:bg-black border border-gray-200 dark:border-gray-700 rounded-lg shadow-sm overflow-hidden",children:[e.jsxs("div",{className:"p-4 border-b border-gray-100 dark:border-gray-800",children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsx("h3",{className:"text-gray-800 dark:text-gray-200 font-medium text-lg",children:s.title}),e.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:s.created_at?X(new Date(s.created_at),{addSuffix:!0}):"Unknown"})]}),s.content&&e.jsxs("div",{className:"text-sm text-gray-600 dark:text-gray-400 mt-2 line-clamp-2",children:[s.content.substring(0,100),"..."]})]}),e.jsx("div",{className:"px-4 py-3 bg-gray-50 dark:bg-gray-900",children:e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{className:"flex items-center space-x-4 text-gray-600 dark:text-gray-300 text-sm",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]}),s.views||0]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"})}),s.like_count||0]})]})})}),e.jsx("div",{className:"flex border-t border-gray-100 dark:border-gray-800",children:e.jsxs("div",{className:"flex items-center justify-between w-full px-4 py-3",children:[e.jsxs(p,{to:`/blog/${s._id}`,className:"inline-flex items-center justify-center px-3 py-1.5 bg-gray-100 dark:bg-gray-800 text-gray-700 dark:text-gray-300 rounded-md text-sm hover:bg-gray-200 dark:hover:bg-gray-700 transition-colors",children:[e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]}),"View"]}),e.jsxs(p,{to:`/edit/${s._id}`,className:"inline-flex items-center justify-center px-3 py-1.5 bg-gray-900 dark:bg-white text-white dark:text-gray-900 rounded-md text-sm hover:bg-gray-800 dark:hover:bg-gray-100 transition-colors",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})}),"Edit"]}),e.jsxs("button",{onClick:()=>J(s._id),className:"inline-flex items-center justify-center px-3 py-1.5 bg-red-50 dark:bg-red-900/20 text-red-600 dark:text-red-400 rounded-md text-sm hover:bg-red-100 dark:hover:bg-red-900/30 transition-colors",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),"Delete"]})]})})]},s._id))}),e.jsxs("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-500 hidden sm:table",children:[e.jsx("thead",{className:"bg-gray-50 dark:bg-black border-b border-gray-200 dark:border-gray-700",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-white uppercase tracking-wider",children:"Title"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-white uppercase tracking-wider",children:"Created"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-white uppercase tracking-wider hidden md:table-cell",children:"Stats"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-white uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white dark:bg-black divide-y divide-gray-200 dark:divide-gray-600",children:b.map(s=>e.jsxs("tr",{className:"border-b border-gray-200 dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-900",children:[e.jsx("td",{className:"px-6 py-4",children:e.jsx("div",{className:"text-gray-800 dark:text-gray-200 font-medium",children:s.title})}),e.jsx("td",{className:"px-6 py-4 text-gray-600 dark:text-gray-300",children:s.created_at?X(new Date(s.created_at),{addSuffix:!0}):"Unknown"}),e.jsx("td",{className:"px-6 py-4 text-gray-600 dark:text-gray-300 hidden md:table-cell",children:e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]}),s.views||0]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"})}),s.like_count||0]})]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center space-x-4 whitespace-nowrap",children:[e.jsxs(p,{to:`/blog/${s._id}`,className:"inline-flex items-center justify-center px-3 py-1 bg-gray-100 dark:bg-gray-800 text-gray-700 dark:text-gray-300 rounded-md text-sm hover:bg-gray-200 dark:hover:bg-gray-700 transition-colors",children:[e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]}),"View"]}),e.jsxs(p,{to:`/edit/${s._id}`,className:"inline-flex items-center justify-center px-3 py-1 bg-gray-900 dark:bg-white text-white dark:text-gray-900 rounded-md text-sm hover:bg-gray-800 dark:hover:bg-gray-100 transition-colors",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})}),"Edit"]}),e.jsxs("button",{onClick:()=>J(s._id),className:"inline-flex items-center justify-center px-3 py-1 bg-red-50 dark:bg-red-900/20 text-red-600 dark:text-red-400 rounded-md text-sm hover:bg-red-100 dark:hover:bg-red-900/30 transition-colors",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),"Delete"]})]})})]},s._id))})]})]})}),S==="likedBlogs"&&e.jsx(e.Fragment,{children:B?e.jsx("div",{className:"py-8",children:e.jsx(R,{})}):O?e.jsx("div",{className:"bg-gray-100 dark:bg-gray-900 text-gray-700 dark:text-gray-300 p-4 rounded-md border border-gray-200 dark:border-gray-700",children:O}):C.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx("p",{className:"text-gray-500 dark:text-gray-400 mb-4",children:"You haven't liked any blog posts yet."}),e.jsx(p,{to:"/",className:"text-gray-900 dark:text-white hover:underline",children:"Explore blogs to like"})]}):e.jsxs("div",{className:"overflow-x-auto -mx-4 sm:-mx-6",children:[e.jsx("div",{className:"grid grid-cols-1 gap-4 mb-4 sm:hidden",children:C.map(s=>e.jsxs("div",{className:"bg-white dark:bg-black border border-gray-200 dark:border-gray-700 rounded-lg shadow-sm overflow-hidden",children:[e.jsxs("div",{className:"p-4 border-b border-gray-100 dark:border-gray-800",children:[e.jsx("div",{className:"flex justify-between items-start",children:e.jsx("h3",{className:"text-gray-800 dark:text-gray-200 font-medium text-lg",children:s.title})}),e.jsxs("div",{className:"text-gray-600 dark:text-gray-400 text-sm mt-2",children:["By ",s.author_name||"Anonymous"]}),s.content&&e.jsxs("div",{className:"text-sm text-gray-600 dark:text-gray-400 mt-2 line-clamp-2",children:[s.content.substring(0,100),"..."]})]}),e.jsx("div",{className:"px-4 py-3 bg-gray-50 dark:bg-gray-900",children:e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{className:"flex items-center space-x-4 text-gray-600 dark:text-gray-300 text-sm",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]}),s.views||0]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 mr-1",fill:"currentColor",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"})}),s.like_count||0]})]})})}),e.jsx("div",{className:"flex border-t border-gray-100 dark:border-gray-800",children:e.jsx("div",{className:"flex items-center w-full px-4 py-3",children:e.jsxs(p,{to:`/blog/${s._id}`,className:"inline-flex items-center justify-center px-3 py-1.5 bg-gray-100 dark:bg-gray-800 text-gray-700 dark:text-gray-300 rounded-md text-sm hover:bg-gray-200 dark:hover:bg-gray-700 transition-colors",children:[e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]}),"View Blog"]})})})]},s._id))}),e.jsxs("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-500 hidden sm:table",children:[e.jsx("thead",{className:"bg-gray-50 dark:bg-black border-b border-gray-200 dark:border-gray-700",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-white uppercase tracking-wider",children:"Title"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-white uppercase tracking-wider",children:"Author"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-white uppercase tracking-wider hidden md:table-cell",children:"Stats"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-white uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white dark:bg-black divide-y divide-gray-200 dark:divide-gray-600",children:C.map(s=>e.jsxs("tr",{className:"border-b border-gray-200 dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-900",children:[e.jsx("td",{className:"px-6 py-4",children:e.jsx("div",{className:"text-gray-800 dark:text-gray-200 font-medium",children:s.title})}),e.jsx("td",{className:"px-6 py-4 text-gray-600 dark:text-gray-300",children:s.author_name||"Anonymous"}),e.jsx("td",{className:"px-6 py-4 text-gray-600 dark:text-gray-300 hidden md:table-cell",children:e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]}),s.views||0]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"})}),s.like_count||0]})]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("div",{className:"flex items-center",children:e.jsxs(p,{to:`/blog/${s._id}`,className:"inline-flex items-center justify-center px-3 py-1 bg-gray-100 dark:bg-gray-800 text-gray-700 dark:text-gray-300 rounded-md text-sm hover:bg-gray-200 dark:hover:bg-gray-700 transition-colors",children:[e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]}),"View"]})})})]},s._id))})]})]})})]})}),P&&e.jsx("div",{className:"fixed inset-0 flex items-center justify-center bg-black bg-opacity-30 z-50",children:e.jsxs("div",{className:"bg-white dark:bg-black p-6 rounded-lg shadow-md border border-gray-200 dark:border-gray-700 max-w-md w-full",children:[e.jsx("h2",{className:"text-xl font-semibold mb-4 dark:text-white",children:"Delete Blog"}),e.jsx("p",{className:"mb-4 dark:text-gray-300",children:"Are you sure you want to delete this blog?"}),e.jsxs("div",{className:"flex justify-end space-x-4",children:[e.jsx("button",{onClick:()=>j(!1),className:"px-4 py-2 bg-gray-200 dark:bg-gray-700 rounded hover:bg-gray-300 dark:hover:bg-gray-600",children:"Cancel"}),e.jsx("button",{onClick:Y,disabled:$,className:"px-4 py-2 bg-red-600 text-white rounded hover:bg-red-700",children:$?"Deleting...":"Delete"})]})]})})]})})};export{ae as default};
