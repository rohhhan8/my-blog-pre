import{u as N,b as S,e as I,r as o,j as e,L as P,B as E}from"./index-0685d0f1.js";import{I as x}from"./Input-41c5edce.js";const G=()=>{var g,m;const{login:y,signInWithGoogle:p}=N(),i=S(),b=I(),[n,f]=o.useState(""),[d,v]=o.useState(""),[c,r]=o.useState(""),[l,s]=o.useState(!1),u=((m=(g=b.state)==null?void 0:g.from)==null?void 0:m.pathname)||"/",w=async a=>{a.preventDefault(),r(""),s(!0);try{const t=await y(n,d),j=await t.user.getIdToken(!0);localStorage.setItem("authToken",j);const h=t.user;localStorage.setItem("userDisplayName",h.displayName||""),localStorage.setItem("userEmail",h.email||""),console.log("Login successful, token stored"),i(u,{replace:!0})}catch(t){console.error("Login error:",t),t.code==="auth/invalid-credential"||t.code==="auth/user-not-found"||t.code==="auth/wrong-password"?r("Invalid email or password. Please check your credentials."):t.code==="auth/too-many-requests"?r("Too many failed login attempts. Please try again later or reset your password."):r("Failed to log in. Please try again later.")}finally{s(!1)}},k=async()=>{r(""),s(!0);try{const a=await p(),t=await a.getIdToken(!0);localStorage.setItem("authToken",t),localStorage.setItem("userDisplayName",a.displayName||""),localStorage.setItem("userEmail",a.email||""),console.log("Google sign-in successful, token stored"),i(u,{replace:!0})}catch(a){console.error("Google sign-in error:",a),a.code==="auth/popup-closed-by-user"?r("Sign-in was cancelled. Please try again."):a.code==="auth/popup-blocked"?r("Pop-up was blocked by your browser. Please allow pop-ups for this site."):r("Failed to sign in with Google. Please try again later.")}finally{s(!1)}};return e.jsx("div",{className:"min-h-screen flex items-center justify-center py-12 px-4 sm:px-6 lg:px-8 bg-blog-bg dark:bg-black transition-colors duration-200",children:e.jsxs("div",{className:"max-w-md w-full space-y-8 bg-white dark:bg-black p-8 rounded-lg shadow-md border border-gray-200 dark:border-gray-700 transition-all duration-300 hover:shadow-blog-card-light-hover dark:hover:shadow-blog-card-dark-hover hover:border-gray-300 dark:hover:border-gray-500",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("h2",{className:"text-3xl font-bold text-gray-900 dark:text-white font-playfair",children:"Welcome back"}),e.jsx("p",{className:"mt-2 text-sm text-gray-600 dark:text-gray-400",children:"Sign in to your account to continue"})]}),c&&e.jsx("div",{className:"bg-gray-100 dark:bg-gray-900 text-gray-700 dark:text-gray-300 p-3 rounded-md text-sm border border-gray-200 dark:border-gray-700",children:c}),e.jsxs("form",{className:"mt-8 space-y-6",onSubmit:w,children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx(x,{id:"email",type:"email",label:"Email address",value:n,onChange:a=>f(a.target.value),required:!0,autoComplete:"email"}),e.jsx(x,{id:"password",type:"password",label:"Password",value:d,onChange:a=>v(a.target.value),required:!0,autoComplete:"current-password"})]}),e.jsx("div",{className:"flex items-center justify-between",children:e.jsx("div",{className:"text-sm",children:e.jsx(P,{to:"/signup",className:"font-medium text-gray-900 dark:text-white hover:text-gray-700 dark:hover:text-gray-300 transition-colors duration-200",children:"Don't have an account? Sign up"})})}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(E,{type:"submit",variant:"primary",fullWidth:!0,disabled:l,className:"group relative w-full flex justify-center py-2 px-4",children:l?"Signing in...":"Sign in"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-0 flex items-center",children:e.jsx("div",{className:"w-full border-t border-gray-300 dark:border-gray-700"})}),e.jsx("div",{className:"relative flex justify-center text-sm",children:e.jsx("span",{className:"px-2 bg-white dark:bg-black text-gray-500 dark:text-gray-400",children:"Or continue with"})})]}),e.jsxs("button",{type:"button",onClick:k,disabled:l,className:"w-full flex justify-center items-center py-2 px-4 border border-gray-300 dark:border-gray-700 rounded-md shadow-sm bg-white dark:bg-black text-sm font-medium text-gray-900 dark:text-white hover:bg-gray-50 dark:hover:bg-gray-800 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-500 transition-all duration-200",children:[e.jsxs("svg",{className:"h-5 w-5 mr-2",viewBox:"0 0 24 24",children:[e.jsx("path",{d:"M12.545 10.239v3.821h5.445c-0.712 2.315-2.647 3.972-5.445 3.972-3.332 0-6.033-2.701-6.033-6.032s2.701-6.032 6.033-6.032c1.498 0 2.866 0.549 3.921 1.453l2.814-2.814c-1.79-1.677-4.184-2.702-6.735-2.702-5.522 0-10 4.478-10 10s4.478 10 10 10c8.396 0 10.249-7.85 9.426-11.748l-9.426 0.082z",fill:"#4285F4"}),e.jsx("path",{d:"M12.545 10.239l-9.426 0.082c-0.293 1.388-0.449 2.828-0.449 4.301h9.875v-4.383z",fill:"#34A853"}),e.jsx("path",{d:"M7.223 14.622l-4.553 0c0 1.473 0.156 2.913 0.449 4.301l4.104 0c-0.226-1.357-0.226-2.944 0-4.301z",fill:"#FBBC05"}),e.jsx("path",{d:"M12.545 19.776c2.8 0 4.734-1.657 5.445-3.972l-5.445-3.821v7.793z",fill:"#EA4335"})]}),"Sign in with Google"]})]})]})]})})};export{G as default};
