import{f as be,e as ye,u as xe,b as ve,r as p,j as r,h as ke,L as j,d as k,g as _e}from"./index-0685d0f1.js";import{f as Se}from"./index-b158c261.js";const Ce=(s,l="")=>{if(!s)return;const g=window.location.origin,w=`${g}/blog/${s._id}`,y=s.title||"BlogHub - Blog Post",_=s.content?s.content.replace(/<[^>]*>/g,"").substring(0,160)+"...":"Read this interesting blog post on BlogHub",C=s.image_url||`${g}/public/blog-icon.svg`,c=l?` by ${l}`:"";document.title=`${y} - BlogHub`,M("description",_),M("keywords",`blog, ${s.title}, ${l}, blogging, stories`),h("og:type","article"),h("og:url",w),h("og:title",`${y}${c}`),h("og:description",_),h("og:image",C),h("og:site_name","BlogHub"),h("og:article:author",l),s.created_at&&h("og:article:published_time",new Date(s.created_at).toISOString()),h("twitter:card","summary_large_image"),h("twitter:url",w),h("twitter:title",`${y}${c}`),h("twitter:description",_),h("twitter:image",C),h("twitter:creator",l?`@${l}`:"@BlogHub"),oe(w),console.log("Meta tags updated for blog:",y)},Be=()=>{const s=window.location.origin,l="BlogHub - Ideas That Inspire, Stories That Matter",g="A modern blogging platform where ideas inspire and stories matter. Share your thoughts and connect with diverse voices.",w=`${s}/public/blog-icon.svg`,y=s;document.title=l,M("description",g),M("keywords","blog, blogging, writing, stories, ideas, platform, share, connect"),h("og:type","website"),h("og:url",y),h("og:title",l),h("og:description",g),h("og:image",w),h("og:site_name","BlogHub"),h("twitter:card","summary_large_image"),h("twitter:url",y),h("twitter:title",l),h("twitter:description",g),h("twitter:image",w),oe(y),console.log("Meta tags reset to default")},M=(s,l)=>{if(!l)return;let g=document.querySelector(`meta[name="${s}"]`);g?g.setAttribute("content",l):(g=document.createElement("meta"),g.setAttribute("name",s),g.setAttribute("content",l),document.head.appendChild(g))},h=(s,l)=>{if(!l)return;let g=document.querySelector(`meta[property="${s}"]`);g?g.setAttribute("content",l):(g=document.createElement("meta"),g.setAttribute("property",s),g.setAttribute("content",l),document.head.appendChild(g))},oe=s=>{let l=document.querySelector('link[rel="canonical"]');l?l.setAttribute("href",s):(l=document.createElement("link"),l.setAttribute("rel","canonical"),l.setAttribute("href",s),document.head.appendChild(l))},Ee=(s,l="")=>{if(!s)return;const g=window.location.origin,w=`${g}/blog/${s._id}`,y={"@context":"https://schema.org","@type":"BlogPosting",headline:s.title,description:s.content?s.content.replace(/<[^>]*>/g,"").substring(0,160):"",url:w,datePublished:s.created_at?new Date(s.created_at).toISOString():"",dateModified:s.updated_at?new Date(s.updated_at).toISOString():s.created_at?new Date(s.created_at).toISOString():"",author:{"@type":"Person",name:l||"BlogHub Author"},publisher:{"@type":"Organization",name:"BlogHub",logo:{"@type":"ImageObject",url:`${g}/public/blog-icon.svg`}},mainEntityOfPage:{"@type":"WebPage","@id":w}};s.image_url&&(y.image={"@type":"ImageObject",url:s.image_url});const _=document.querySelector('script[type="application/ld+json"]');_&&_.remove();const C=document.createElement("script");C.type="application/ld+json",C.textContent=JSON.stringify(y),document.head.appendChild(C),console.log("Structured data updated for blog:",s.title)},De=()=>{const s=document.querySelector('script[type="application/ld+json"]');s&&(s.remove(),console.log("Structured data removed"))},je=()=>{var Y,K,Q,X,ee,te;const{id:s,_id:l,"*":g}=be(),w=ye(),y=t=>{if(!t)return"#000000";const e=t.split("").reduce((n,f)=>f.charCodeAt(0)+((n<<5)-n),0),a=["#FF0000","#DC2626","#B91C1C","#991B1B","#7F1D1D","#EF4444","#FF8C00","#F97316","#EA580C","#C2410C","#FF4500","#FB923C","#FFFF00","#FACC15","#EAB308","#CA8A04","#A16207","#FEF08A","#00FF00","#22C55E","#16A34A","#15803D","#166534","#4ADE80","#84CC16","#65A30D","#008000","#0000FF","#3B82F6","#2563EB","#1D4ED8","#1E40AF","#60A5FA","#0284C7","#0369A1","#0EA5E9","#800080","#8B5CF6","#7C3AED","#6D28D9","#5B21B6","#A78BFA","#9333EA","#7E22CE","#6B21A8","#FFC0CB","#EC4899","#DB2777","#BE185D","#9D174D","#F472B6","#FF1493","#A52A2A","#92400E","#78350F","#B45309","#D97706","#F59E0B","#008080","#0D9488","#0F766E","#115E59","#14B8A6","#2DD4BF","#06B6D4","#0891B2","#00FFFF","#000000","#18181B","#27272A","#3F3F46","#52525B","#71717A","#1E293B","#334155","#475569","#4B0082","#9400D3","#8A2BE2","#9370DB","#6A0DAD","#FF00FF","#C71585","#FF6347","#FF7F50","#20B2AA","#3CB371","#2E8B57","#228B22","#32CD32","#00FA9A","#00CED1","#5F9EA0","#4682B4","#6495ED","#4169E1","#191970","#8B4513","#A0522D","#CD853F","#DEB887","#8B0000","#800000","#B22222","#DC143C"],i=Math.abs(e)%a.length;return a[i]},_=t=>{const e=parseInt(t.slice(1,3),16),a=parseInt(t.slice(3,5),16),i=parseInt(t.slice(5,7),16);return(.299*e+.587*a+.114*i)/255>.5?"#000000":"#FFFFFF"},c=(()=>{if(s)return s;if(l)return l;if(g){const e=g.match(/([a-zA-Z0-9]+)/);if(e&&e[1])return e[1]}const t=w.pathname.match(/\/blog[s]?\/([a-zA-Z0-9]+)/);return t&&t[1]?t[1]:null})();console.log("Extracted blog ID:",c,"from params:",{id:s,_id:l,splat:g,pathname:w.pathname});const{currentUser:v}=xe(),O=ve(),[o,$]=p.useState(null),[W,T]=p.useState(""),[R,P]=p.useState(!0),ae=t=>{try{return JSON.parse(localStorage.getItem("likedBlogs")||"{}")[t]===!0}catch(e){return console.error("Error checking liked status:",e),!1}},[U,F]=p.useState(ae(c)),[re,A]=p.useState(0),[se,B]=p.useState(0),[q,ne]=p.useState(""),[ie,N]=p.useState(!1),[Fe,le]=p.useState(null),[b,S]=p.useState(""),[H,ce]=p.useState("#000000"),[m,de]=p.useState("#FFFFFF");p.useEffect(()=>{const e=`${window.location.origin}/blog/${c}`;console.log("Setting share URL:",e),ne(e)},[c]);const ge=async t=>{if(t)try{console.log("Fetching fresh blog data in background for ID:",t);let e;try{e=await k.get(`/api/blogs/${t}/`)}catch(a){if(a.response&&a.response.status===404)e=await k.get(`/api/blogs/${t}`);else throw a}if(e&&e.data){console.log("Got fresh blog data:",e.data),$(e.data),e.data.is_liked!==void 0&&F(e.data.is_liked),e.data.like_count!==void 0&&A(e.data.like_count),e.data.views!==void 0&&B(e.data.views);try{sessionStorage.setItem(`blog_${t}`,JSON.stringify(e.data)),sessionStorage.setItem(`blog_${t}_timestamp`,Date.now().toString())}catch(a){console.error("Error caching blog:",a)}try{const a=await k.get(`/api/blogs/${t}/view/`);a.data.views&&B(a.data.views)}catch(a){console.error("Error tracking view:",a)}}}catch(e){console.error("Error fetching fresh blog data:",e)}},I=async t=>{if(t){try{const e=localStorage.getItem("currentUserProfile");if(e){const a=JSON.parse(e);if(a.old_name===t&&a.display_name){S(a.display_name),console.log(`Using current user's updated name: ${a.display_name}`);return}}}catch(e){console.error("Error checking current user profile:",e)}try{const e=localStorage.getItem(`author_${t}`);if(e){const a=JSON.parse(e);a.display_name&&(S(a.display_name),console.log("Using cached author name:",a.display_name))}}catch(e){console.error("Error reading cached author data:",e)}try{console.log("Fetching profile for author:",t);const e=new Date().getTime(),a=await _e(`${t}?_=${e}`);console.log("Author profile:",a),a&&(le(a),a.display_name&&(S(a.display_name),console.log("Updated author name to:",a.display_name),localStorage.setItem(`author_${t}`,JSON.stringify({display_name:a.display_name,timestamp:new Date().toISOString()})),localStorage.setItem("lastViewedAuthor",JSON.stringify({username:t,display_name:a.display_name,timestamp:new Date().toISOString()}))))}catch(e){console.error("Error fetching author profile:",e)}}};p.useEffect(()=>{const t=async()=>{var e;try{P(!0),console.log("Fetching blog with ID:",c);const a=sessionStorage.getItem(`blog_${c}`),i=sessionStorage.getItem(`blog_${c}_timestamp`),f=(i?Date.now()-parseInt(i):1/0)<5*60*1e3;if(a&&f)try{const d=JSON.parse(a);console.log("Using cached blog from sessionStorage"),$(d),d.is_liked!==void 0&&F(d.is_liked),d.like_count!==void 0&&A(d.like_count),d.views!==void 0&&B(d.views),d.author_name&&S(d.author_name);const D=d.author_name||d.author;D&&I(D).catch(V=>{console.error("Error fetching author profile:",V)}),setTimeout(()=>{ge(c).catch(V=>{console.error("Error fetching fresh blog data:",V)})},1e3);return}catch(d){console.error("Error parsing cached blog:",d)}let u;try{u=await k.get(`/api/blogs/${c}/`)}catch(d){if(d.response&&d.response.status===404)u=await k.get(`/api/blogs/${c}`);else throw d}console.log("Blog data:",u.data),$(u.data),u.data.is_liked!==void 0&&F(u.data.is_liked),u.data.like_count!==void 0&&A(u.data.like_count),u.data.views!==void 0&&B(u.data.views),u.data.author_name&&S(u.data.author_name);try{sessionStorage.setItem(`blog_${c}`,JSON.stringify(u.data)),sessionStorage.setItem(`blog_${c}_timestamp`,Date.now().toString()),console.log("Blog data cached in sessionStorage")}catch(d){console.error("Error caching blog:",d)}const x=u.data.author_name||u.data.author;let E=!1;try{const d=localStorage.getItem("currentUserProfile");if(d&&x){const D=JSON.parse(d);D.old_name===x&&D.display_name&&(S(D.display_name),console.log(`Using current user's updated name: ${D.display_name}`),E=!0)}}catch(d){console.error("Error checking current user profile:",d)}E||(u.data.author_name?await I(u.data.author_name):u.data.author&&await I(u.data.author)),T("");try{const d=await k.get(`/api/blogs/${c}/view/`);d.data.views&&B(d.data.views)}catch(d){console.error("Error tracking view:",d)}}catch(a){console.error("Error fetching blog:",a),console.error("Response data:",(e=a.response)==null?void 0:e.data);try{const n=(await k.get("/api/blogs/")).data.find(f=>f._id===c);if(n){console.log("Found blog in all blogs:",n),$(n),n.is_liked!==void 0&&F(n.is_liked),n.like_count!==void 0&&A(n.like_count),n.views!==void 0&&B(n.views),n.author_name&&S(n.author_name);const f=n.author_name||n.author;let u=!1;try{const x=localStorage.getItem("currentUserProfile");if(x&&f){const E=JSON.parse(x);E.old_name===f&&E.display_name&&(S(E.display_name),console.log(`Using current user's updated name: ${E.display_name}`),u=!0)}}catch(x){console.error("Error checking current user profile:",x)}u||(n.author_name?await I(n.author_name):n.author&&await I(n.author)),T("");try{const x=await k.get(`/api/blogs/${c}/view/`);x.data.views&&B(x.data.views)}catch(x){console.error("Error tracking view:",x)}return}}catch(i){console.error("Error fetching all blogs:",i)}T("Blog not found or unable to fetch.")}finally{P(!1)}};if(sessionStorage.removeItem("redirectAttempt"),c){console.log("Fetching blog with ID:",c),t();const e=`/blog/${c}`;w.pathname!==e&&(console.log("Redirecting to canonical URL:",e),O(e,{replace:!0}))}else console.error("Invalid blog ID"),T("Invalid blog ID"),P(!1)},[c,w.pathname,O]);const[Z,G]=p.useState(!1),[z,ue]=p.useState(!1),[L,he]=p.useState(!1);if(p.useEffect(()=>{if(!R&&o){ue(!0);const t=y(o._id);ce(t);const e=_(t);if(de(e),console.log("Blog color set to:",t,"with text color:",e),Ce(o,b),Ee(o,b),o.image_url){const a=new Image;a.src=o.image_url,a.onload=()=>{console.log("Blog image preloaded")}}if(o.content){const a=document.createElement("div");a.innerHTML=o.content,a.querySelectorAll("img").forEach(n=>{if(n.src){const f=new Image;f.src=n.src,console.log("Preloading content image:",n.src)}})}}},[R,o]),p.useEffect(()=>{if(Z&&z){const t=setTimeout(()=>{he(!0),setTimeout(()=>{window.dispatchEvent(new CustomEvent("blogContentReady")),console.log("Dispatched blogContentReady event")},500)},1500);return()=>clearTimeout(t)}},[Z,z]),p.useEffect(()=>()=>{Be(),De(),console.log("Meta tags reset on component unmount")},[]),R||!L)return r.jsxs(r.Fragment,{children:[r.jsx(ke,{onBeforeHide:()=>G(!0),onContentReady:t=>{G(t)}}),z&&r.jsxs("div",{className:"hidden",children:[(o==null?void 0:o.image_url)&&r.jsx("img",{src:o.image_url,alt:"Preload",onLoad:()=>console.log("Blog image preloaded in hidden div"),style:{display:"none"}}),r.jsxs("div",{style:{display:"none"},children:[(o==null?void 0:o.title)&&r.jsx("h1",{children:o.title}),(o==null?void 0:o.content)&&r.jsx("div",{dangerouslySetInnerHTML:{__html:o.content}})]})]})]});if(W)return r.jsx("div",{className:"min-h-screen bg-blog-bg dark:bg-black pt-32 flex justify-center",children:r.jsxs("div",{className:"bg-white dark:bg-black rounded-lg shadow-md border border-gray-200 dark:border-gray-700 p-6 max-w-lg",children:[r.jsx("h2",{className:"text-2xl font-bold text-red-500 mb-4",children:"Error"}),r.jsx("p",{className:"text-gray-700 dark:text-gray-300 mb-6",children:W}),r.jsx(j,{to:"/",className:"bg-blog-accent text-white px-4 py-2 rounded hover:bg-opacity-90 transition-colors",children:"Return to Home"})]})});if(!o)return null;const me=o.created_at?Se(new Date(o.created_at),{addSuffix:!0}):"Unknown date",pe=async()=>{var t;if(!v){O("/login");return}try{console.log("Liking blog with ID:",c);const e=await v.getIdToken(),a=await k.post(`/api/blogs/${c}/like/`,{},{headers:{Authorization:`Bearer ${e}`}});if(console.log("Like response:",a.data),a.data.status==="liked"){F(!0),A(i=>a.data.like_count),console.log("Blog liked successfully");try{const i=JSON.parse(localStorage.getItem("likedBlogs")||"{}");i[c]=!0,localStorage.setItem("likedBlogs",JSON.stringify(i))}catch(i){console.error("Error updating localStorage:",i)}}else if(a.data.status==="unliked"){F(!1),A(i=>a.data.like_count),console.log("Blog unliked successfully");try{const i=JSON.parse(localStorage.getItem("likedBlogs")||"{}");delete i[c],localStorage.setItem("likedBlogs",JSON.stringify(i))}catch(i){console.error("Error updating localStorage:",i)}}}catch(e){console.error("Error liking post:",e),console.error("Error details:",((t=e.response)==null?void 0:t.data)||e.message)}},fe=async()=>{try{const t=q||`${window.location.origin}/blog/${c}`,e=o.title,a=`Check out this blog post: ${o.title}`;console.log("Sharing URL:",t),localStorage.setItem("lastSharedBlogId",c),navigator.share?(await navigator.share({title:e,text:a,url:t}),console.log("Shared successfully using Web Share API")):we(t,e,a)}catch(t){console.error("Error sharing:",t);try{const e=q||`${window.location.origin}/blog/${c}`;await navigator.clipboard.writeText(e),N(!0),setTimeout(()=>N(!1),3e3)}catch{alert(`Error sharing: ${t.message}`)}}},we=(t,e,a)=>{const i=document.createElement("div");i.className="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",i.innerHTML=`
      <div class="bg-white dark:bg-gray-900 rounded-lg p-6 max-w-sm w-full mx-4 shadow-xl">
        <h3 class="text-lg font-semibold text-gray-900 dark:text-white mb-4">Share this blog</h3>
        <div class="space-y-3">
          <button onclick="shareToTwitter('${t}', '${e}')" class="w-full flex items-center space-x-3 p-3 rounded-lg bg-blue-500 text-white hover:bg-blue-600 transition-colors">
            <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 24 24"><path d="M23.953 4.57a10 10 0 01-2.825.775 4.958 4.958 0 002.163-2.723c-.951.555-2.005.959-3.127 1.184a4.92 4.92 0 00-8.384 4.482C7.69 8.095 4.067 6.13 1.64 3.162a4.822 4.822 0 00-.666 2.475c0 1.71.87 3.213 2.188 4.096a4.904 4.904 0 01-2.228-.616v.06a4.923 4.923 0 003.946 4.827 4.996 4.996 0 01-2.212.085 4.936 4.936 0 004.604 3.417 9.867 9.867 0 01-6.102 2.105c-.39 0-.779-.023-1.17-.067a13.995 13.995 0 007.557 2.209c9.053 0 13.998-7.496 13.998-13.985 0-.21 0-.42-.015-.63A9.935 9.935 0 0024 4.59z"/></svg>
            <span>Share on Twitter</span>
          </button>
          <button onclick="shareToFacebook('${t}')" class="w-full flex items-center space-x-3 p-3 rounded-lg bg-blue-600 text-white hover:bg-blue-700 transition-colors">
            <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 24 24"><path d="M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z"/></svg>
            <span>Share on Facebook</span>
          </button>
          <button onclick="shareToLinkedIn('${t}', '${e}')" class="w-full flex items-center space-x-3 p-3 rounded-lg bg-blue-700 text-white hover:bg-blue-800 transition-colors">
            <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 24 24"><path d="M20.447 20.452h-3.554v-5.569c0-1.328-.027-3.037-1.852-3.037-1.853 0-2.136 1.445-2.136 2.939v5.667H9.351V9h3.414v1.561h.046c.477-.9 1.637-1.85 3.37-1.85 3.601 0 4.267 2.37 4.267 5.455v6.286zM5.337 7.433c-1.144 0-2.063-.926-2.063-2.065 0-1.138.92-2.063 2.063-2.063 1.14 0 2.064.925 2.064 2.063 0 1.139-.925 2.065-2.064 2.065zm1.782 13.019H3.555V9h3.564v11.452zM22.225 0H1.771C.792 0 0 .774 0 1.729v20.542C0 23.227.792 24 1.771 24h20.451C23.2 24 24 23.227 24 22.271V1.729C24 .774 23.2 0 22.222 0h.003z"/></svg>
            <span>Share on LinkedIn</span>
          </button>
          <button onclick="copyToClipboardDetail('${t}')" class="w-full flex items-center space-x-3 p-3 rounded-lg bg-gray-600 text-white hover:bg-gray-700 transition-colors">
            <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"></path></svg>
            <span>Copy Link</span>
          </button>
        </div>
        <button onclick="closeShareModalDetail()" class="mt-4 w-full p-2 text-gray-600 dark:text-gray-400 hover:text-gray-800 dark:hover:text-gray-200 transition-colors">
          Cancel
        </button>
      </div>
    `,document.body.appendChild(i),window.shareToTwitter=(n,f)=>{window.open(`https://twitter.com/intent/tweet?url=${encodeURIComponent(n)}&text=${encodeURIComponent(f)}`,"_blank"),closeShareModalDetail()},window.shareToFacebook=n=>{window.open(`https://www.facebook.com/sharer/sharer.php?u=${encodeURIComponent(n)}`,"_blank"),closeShareModalDetail()},window.shareToLinkedIn=(n,f)=>{window.open(`https://www.linkedin.com/sharing/share-offsite/?url=${encodeURIComponent(n)}`,"_blank"),closeShareModalDetail()},window.copyToClipboardDetail=async n=>{try{await navigator.clipboard.writeText(n),N(!0),setTimeout(()=>N(!1),3e3),closeShareModalDetail()}catch{alert("Failed to copy link")}},window.closeShareModalDetail=()=>{document.body.contains(i)&&document.body.removeChild(i)},i.addEventListener("click",n=>{n.target===i&&closeShareModalDetail()})};console.log("Checking if user is author:"),console.log("Blog author:",o.author),console.log("Blog author_id:",o.author_id),console.log("Current user:",v);let J=!1;if(v){const t=typeof o.author=="string",e=typeof o.author=="object",a=t&&o.author===v.uid;console.log("Match by UID:",a);const i=e&&((Y=o.author)==null?void 0:Y.uid)===v.uid;console.log("Match by object UID:",i);const n=o.author_id===v.uid;console.log("Match by author_id:",n);const f=t&&o.author===v.email;console.log("Match by email:",f);const u=o.author_name===v.displayName;console.log("Match by display name:",u),J=a||i||n||f||u,console.log("Is author:",J)}return r.jsxs("div",{className:`min-h-screen bg-white dark:bg-black page-content relative transition-all duration-1500 ease-in-out ${L?"opacity-100 translate-y-0":"opacity-0 translate-y-4"}`,style:{willChange:"opacity, transform",backfaceVisibility:"hidden",WebkitBackfaceVisibility:"hidden",WebkitFontSmoothing:"subpixel-antialiased",transform:L?"translateZ(0)":"translateZ(0) translateY(4px)",visibility:L?"visible":"hidden"},onLoad:()=>{window.dispatchEvent(new CustomEvent("blogContentReady"))},children:[ie&&r.jsx("div",{className:"fixed bottom-4 right-4 bg-gray-900 dark:bg-white text-white dark:text-gray-900 px-4 py-2 rounded-md shadow-lg z-50 animate-fade-in",children:"Link copied to clipboard!"}),r.jsx("div",{className:"max-w-5xl mx-auto px-3 sm:px-6 lg:px-8 w-full",children:r.jsxs("div",{className:"rounded-lg shadow-md border overflow-hidden",style:{background:H,color:m,borderColor:`${m}30`},children:[o.image_url&&r.jsx("div",{className:"w-full h-48 sm:h-64 md:h-96 overflow-hidden",children:r.jsx("img",{src:o.image_url,alt:o.title,loading:"eager",decoding:"async",fetchpriority:"high",className:"w-full h-full object-cover transition-transform duration-500 hover:scale-105",style:{willChange:"transform",backfaceVisibility:"hidden",WebkitBackfaceVisibility:"hidden",transform:"translateZ(0)"},onLoad:()=>{console.log("Blog image loaded in main view"),window.dispatchEvent(new CustomEvent("blogContentReady"))},onError:t=>{console.error("Error loading blog image:",t),t.target.onerror=null,t.target.style.display="none",window.dispatchEvent(new CustomEvent("blogContentReady"))}})}),r.jsxs("div",{className:"p-4 sm:p-6 md:p-10",children:[r.jsx("h1",{className:"text-2xl sm:text-3xl md:text-5xl font-bold text-gray-900 dark:text-white font-playfair mb-4 sm:mb-6",style:{color:m},children:o.title}),r.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center mb-6 sm:mb-8 border-b border-gray-200 dark:border-gray-700 pb-4 sm:pb-6 gap-4",children:[r.jsxs("div",{className:"flex items-center",children:[r.jsx(j,{to:`/profile/${encodeURIComponent(b||o.author_name||o.author||"anonymous")}`,className:"block",onClick:t=>{console.log("Author info:",{author:o.author,author_name:o.author_name,updated_name:b,author_id:o.author_id}),(b||o.author_name||o.author)==="anonymous"&&(t.preventDefault(),alert("This author does not have a profile"));const e=b||o.author_name||o.author;e&&localStorage.setItem("lastViewedAuthor",JSON.stringify({username:e,display_name:e,timestamp:new Date().toISOString()}))},children:r.jsx("div",{className:"h-10 w-10 sm:h-12 sm:w-12 rounded-full flex items-center justify-center font-medium text-lg hover:shadow-md transition-shadow",style:{backgroundColor:H,color:m,border:`1px solid ${m}30`},children:((K=b==null?void 0:b.charAt(0))==null?void 0:K.toUpperCase())||((X=(Q=o.author_name)==null?void 0:Q.charAt(0))==null?void 0:X.toUpperCase())||((te=(ee=o.author)==null?void 0:ee.charAt(0))==null?void 0:te.toUpperCase())||"A"})}),r.jsxs("div",{className:"ml-3 sm:ml-4",children:[r.jsx(j,{to:`/profile/${encodeURIComponent(b||o.author_name||o.author||"anonymous")}`,className:"text-sm sm:text-base font-medium hover:underline",style:{color:m},onClick:t=>{console.log("Author info (from name link):",{author:o.author,author_name:o.author_name,updated_name:b,author_id:o.author_id}),(b||o.author_name||o.author)==="anonymous"&&(t.preventDefault(),alert("This author does not have a profile"));const e=b||o.author_name||o.author;e&&localStorage.setItem("lastViewedAuthor",JSON.stringify({username:e,display_name:e,timestamp:new Date().toISOString()}))},children:b||o.author_name||o.author||"Anonymous"}),r.jsxs("div",{className:"flex items-center text-xs sm:text-sm space-x-2 sm:space-x-4",style:{color:m,opacity:.8},children:[r.jsx("span",{children:me}),r.jsxs("span",{className:"flex items-center",children:[r.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-3 w-3 sm:h-4 sm:w-4 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:m,style:{opacity:.8},children:[r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]}),se," views"]})]})]})]}),r.jsxs("div",{className:"flex items-center space-x-2 sm:space-x-3 sm:ml-auto mt-2 sm:mt-0",children:[r.jsxs("button",{onClick:pe,className:"flex items-center space-x-1 px-2 sm:px-3 py-1 rounded-full border transition-colors text-xs sm:text-sm",style:{backgroundColor:U?`${m}30`:"transparent",borderColor:`${m}40`,color:m},children:[r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 sm:h-5 sm:w-5",fill:U?m:"none",viewBox:"0 0 24 24",stroke:m,style:{opacity:U?1:.8,transform:U?"scale(1.1)":"scale(1)"},children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"})}),r.jsx("span",{children:re})]}),r.jsxs("button",{onClick:fe,className:"flex items-center space-x-1 px-2 sm:px-3 py-1 rounded-full border transition-colors text-xs sm:text-sm",style:{backgroundColor:"transparent",borderColor:`${m}40`,color:m},children:[r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 sm:h-5 sm:w-5",fill:"none",viewBox:"0 0 24 24",stroke:m,style:{opacity:.8},children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M8.684 13.342C8.886 12.938 9 12.482 9 12c0-.482-.114-.938-.316-1.342m0 2.684a3 3 0 110-2.684m0 2.684l6.632 3.316m-6.632-6l6.632-3.316m0 0a3 3 0 105.367-2.684 3 3 0 00-5.367 2.684zm0 9.316a3 3 0 105.368 2.684 3 3 0 00-5.368-2.684z"})}),r.jsx("span",{children:"Share"})]}),J&&r.jsx(j,{to:`/edit/${c}`,className:"inline-flex items-center px-3 sm:px-5 py-1 sm:py-2 rounded text-xs sm:text-sm transition-all duration-300 shadow-sm",style:{backgroundColor:m,color:H,border:`1px solid ${m}30`},children:"Edit Post"})]})]}),r.jsx("article",{className:"prose dark:prose-invert max-w-none prose-base sm:prose-lg md:prose-xl",style:{color:m},ref:t=>{t&&(window.dispatchEvent(new CustomEvent("blogContentReady")),console.log("Content rendered, dispatched blogContentReady event"))},children:o.content&&typeof o.content=="string"&&o.content.includes("<")&&o.content.includes(">")?r.jsx("div",{dangerouslySetInnerHTML:{__html:o.content}}):o.content.split(`
`).map((t,e)=>t?r.jsx("p",{className:"mb-4 sm:mb-6 text-gray-800 dark:text-gray-100 text-sm sm:text-base md:text-lg",style:{color:m},children:t},e):r.jsx("br",{},e))}),r.jsx("div",{className:"mt-6 sm:mt-10 pt-4 sm:pt-6 border-t border-gray-200 dark:border-gray-700",children:r.jsxs(j,{to:"/",className:"inline-flex items-center text-gray-900 dark:text-white hover:text-gray-700 dark:hover:text-gray-300 transition-colors text-sm sm:text-base",style:{color:m},children:[r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 sm:h-5 sm:w-5 mr-1 sm:mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 19l-7-7m0 0l7-7m-7 7h18"})}),"Back to all blogs"]})})]})]})})]})};export{je as default};
