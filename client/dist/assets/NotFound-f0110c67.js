import{e as j,b as y,r as s,j as e,L as u,B as b}from"./index-0685d0f1.js";const w=()=>{var l;const o=j();y();const[a,p]=s.useState(5),[n,f]=s.useState(!1);return s.useEffect(()=>{const c=o.pathname;console.log("404 page loaded with path:",c);const i=localStorage.getItem("lastSharedBlogId"),r=c.match(/\/blog[s]?\/([a-zA-Z0-9]+)/),d=sessionStorage.getItem("redirectAttempt"),g=parseInt(sessionStorage.getItem("redirectCount")||"0");if(g>3){console.log("Too many redirect attempts, showing normal 404"),sessionStorage.removeItem("redirectAttempt"),sessionStorage.removeItem("redirectCount");return}let t=null;if(r&&r[1]?(t=r[1],console.log("Found blog ID in URL:",t)):i&&(t=i,console.log("Using last shared blog ID from localStorage:",t)),t&&!d){sessionStorage.setItem("redirectAttempt","true"),sessionStorage.setItem("redirectCount",(g+1).toString());const m=`/blog/${t}`;console.log("Will redirect to:",m),f(!0);const h=setInterval(()=>{p(x=>x<=1?(clearInterval(h),window.location.replace(m),0):x-1)},1e3);return()=>clearInterval(h)}else d&&(console.log("Detected redirect loop, showing normal 404"),sessionStorage.removeItem("redirectAttempt"))},[o]),e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-blog-bg dark:bg-black px-4 transition-colors duration-200",children:e.jsxs("div",{className:"max-w-md w-full bg-white dark:bg-black p-8 rounded-lg shadow-md text-center border border-gray-200 dark:border-gray-700",children:[e.jsx("h1",{className:"text-6xl font-bold text-blog-accent mb-4",children:"404"}),e.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-4",children:"Page Not Found"}),n?e.jsxs(e.Fragment,{children:[e.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-4",children:"We detected a shared blog link. Redirecting you to the correct page..."}),e.jsxs("p",{className:"text-gray-600 dark:text-gray-400 mb-8",children:["Redirecting in ",a," seconds"]}),e.jsx("div",{className:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2.5 mb-8",children:e.jsx("div",{className:"bg-blog-accent h-2.5 rounded-full transition-all duration-1000",style:{width:`${a/5*100}%`}})})]}):e.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-8",children:"The page you are looking for doesn't exist or has been moved."}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[e.jsx(u,{to:"/",children:e.jsx(b,{variant:"primary",size:"lg",children:"Go back home"})}),n&&e.jsx(u,{to:`/blog/${(l=o.pathname.match(/\/blog[s]?\/([a-zA-Z0-9]+)/))==null?void 0:l[1]}`,children:e.jsx(b,{variant:"secondary",size:"lg",children:"Go to blog now"})})]})]})})};export{w as default};
